<h1>Manage News Items</h1>

<%= link_to 'Sign out', session_path('current'), method: 'delete' %>

<ul class="news-items">
  <%= link_to 'New News Item', new_news_path, class: 'btn btn-primary' %>

  <% @categorised_news_items.each do |category, news_items| %>
    <li class="news-category <%= category_as_class_name category %>">
      <h2 class="category-name"><%= category %></h2>
      <% news_items.each do |news_item| %>
        <article class="news-item">
          <div class="content">
            <%= raw Redcarpet::Markdown.new(Redcarpet::Render::XHTML).render(news_item.content) %>
          </div>

          <% unless news_item.image_path.blank? %>
            <%= image_tag news_item.image_path %>
          <% end %>

          <%= link_to 'Delete', news_path(news_item), method: :delete, class: 'btn btn-danger' %>
        </article>
      <% end %>
    </li>
  <% end %>
</ul>
